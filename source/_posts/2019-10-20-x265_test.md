---
layout: post
title: x265参数小试
---

关于x265，想要最佳性价比 ~~请直接medium~~

~~众所周知~~，x265的默认参数设定比起x264显得不尽人意（至少在某些方面上）。
大众的电脑通常会出现一个很尴尬的问题就是slower太慢slow太快（slow速度是slower的4倍左右）。
在这里给出一些数据，还有我自己的调整的preset。（只在720p下测试）
这些并不能说优秀，只能说是一个折中的选择吧。。
基本测试集只有3个。有一些没测完只能当结论用。。
rect和amp两大玄学参数我到现在都还没搞明白规律。。
rect关闭后速度增长15% ~ 35%而码率只上升0.4% ~ 1%看上去十分诱人，但在个别clip上有明显的质量下降不大敢动。
版本： 3.2


```
x265 --y4m - --preset slower --no-amp --cbqpoffs -1 --crqpoffs -1 \
    --limit-refs=3 --rd=4 --rc-lookahead=60 \
    --no-open-gop --merange 38 --crf 26 -o out.hevc
```

参数是累加的。后面的选项计算速度增幅时前面的选项都是调整后的。画质用ssim计算。
amp(on->off): 压缩率变化小于0.1%。关闭的速度提升在8% ~ 20%。但是偶尔会有一两个clip没有速度提升（？？？）
limit-refs(1->3)和rd(6->4)，速度是原来的270% ~ 320%，同画质码率为100% ~ 102.5%
rc-lookahead(40->60)码率减少-0.1%（没看错） ~ 0.3%，不过反正不影响速度又不缺内存也无所谓。
merange(57->38)速度增加4% ~ 8%，码率增加0.3% ~ 0.5%

对比预设 | 速度 | 码率
-|-|-
slower | ~340% | ~102%
slow | ~83% | ~98%
