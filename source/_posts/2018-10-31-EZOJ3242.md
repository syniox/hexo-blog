---
title: "[EZOJ3242]A"
date: 2018-10-31 15:20:44
tags: 组合数学
category: Solution
---

会发现x和y总是相互影响。
第一种解法是想办法用新的互不影响的x和y代替原来的x,y，这是一个很常见的写法。
把图旋转逆时针转45度，建立出一个新的座标系：
![](turn.png)
红色的表示原来的座标系。
现在考虑当“全”沿着原来的座标系走时，我们可以把他的路径分解成两个。
新座标系的单位长度改成原来的$\frac{1}{\sqrt{2}}$时，
他的四个操作在新座标系变成了(+1,+1),(+1,-1),(-1,+1),(-1,-1)。
这样x和y的决策就互不影响了。
要到达的座标在新座标系为(x-y,x+y)
最后加上组合数就有最终答案：
$$(^k_ {\frac{k-(x-y)}{2}}) * (^k _ {\frac{k-(x+y)}{2}})$$

---
第二钟解法用了一个公式。
现在设有x个操作沿着正方向,y个操作沿着负方向。
根据题意有(x-y)=(a+b),(x+y)=k(然而这个并不重要）
爆搞出答案求和式(z表示"全"沿x轴负方向走的步数)：
$$(^ {x+y} _ x)\sum_ z (^ x_ {a+z})(^y _ z)$$
$$=(^ {x+y} _ x)\sum_ z (^ x_ {a+z})(^y _ {j-z})$$

然后有一个叫范德蒙德恒等式的公式可以套：
$$\sum_ {\sum _{i=1}^ {k}t _i=m}(^{n _1} _{t _1})(^{n _2} _{t _2}) \cdots (^{n _k} _{t _k})
=(^{\sum _{j=1}^{k}n _j} _m)$$
正确性显然，就是k个不同颜色的球，第$i$种有$n _k$个，要取$m$个出来，求方案。
这样的话$\sum_ z (^ x_ {a+z})(^j _ {j-z})$就可以变成$(^{x+j}_ {a+j})$
所以最终答案是：
$$(^ {x+y} _ x)(^{x+j}_ {a+j})$$

[code](https://github.com/syniox/Online_Judge_solutions/blob/master/XSY/3242.cpp)